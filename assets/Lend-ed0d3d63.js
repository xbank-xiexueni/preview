import{c as ge,f as T,u as ye,o as fe,j as e,a as L,b as le,d as i,B as b,F as p,I as v,T as f,C as s,e as J,H as W,P as be,S as Ce,L as ie,g as xe,h as Se,i as ve,k as ke,l as j,m as we}from"./index-d196e65e.js";import{u as B,a as Ie,d as te,b as re}from"./lend-fe9aa8f1.js";import{i as M}from"./isEmpty-3b4191ed.js";import{r as h}from"./react-venders-43274802.js";import{i as oe,I as Te}from"./index-c7399b9e.js";import{I as Le}from"./icon-eth-cc682e35.js";import{L as _e,I as Ae,C as Fe}from"./CollectionListItem-00736902.js";import{H as Re}from"./icon-verified-fill-332dceee.js";import{T as Pe,a as We,b as $,c as ze,d as H}from"./chunk-TPBRUKW6-2a63ea26.js";import{T as Ee}from"./chunk-IXKZFKRY-443bf058.js";import"./toConsumableArray-d9a3109e.js";import"./toNumber-599b2791.js";import"./chunk-GYFRIY2Z-703e4548.js";import"./chunk-PXXQR4UW-ec19b404.js";import"./chunk-G72KV6MB-10fc0d31.js";import"./index-7f4734f9.js";var[Me,z]=ge({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),se=T((t,o)=>{const n=ye("Table",t),{className:u,layout:c,...m}=fe(t);return e(Me,{value:n,children:e(L.table,{ref:o,__css:{tableLayout:c,...n.table},className:le("chakra-table",u),...m})})});se.displayName="Table";var Ne=T((t,o)=>{const n=z();return e(L.thead,{...t,ref:o,__css:n.thead})}),K=T((t,o)=>{const n=z();return e(L.tr,{...t,ref:o,__css:n.tr})}),Oe=T((t,o)=>{var n;const{overflow:u,overflowX:c,className:m,..._}=t;return e(L.div,{ref:o,className:le("chakra-table__container",m),..._,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:(n=u??c)!=null?n:"auto",overflowY:"hidden",maxWidth:"100%"}})}),je=T((t,o)=>{const n=z();return e(L.tbody,{...t,ref:o,__css:n.tbody})}),Be=T(({isNumeric:t,...o},n)=>{const u=z();return e(L.td,{...o,ref:n,__css:u.td,"data-is-numeric":t})}),ne=T(({isNumeric:t,...o},n)=>{const u=z();return e(L.th,{...o,ref:n,__css:u.th,"data-is-numeric":t})});const $e="/preview/assets/icon-sort-down-ea5b17b4.svg",He="/preview/assets/icon-sort-up-422c42d4.svg",Ke="/preview/assets/icon-unsort-1a3055a2.svg",De="/preview/assets/empty-7ab31d89.svg",U=({icon:t,description:o,action:n})=>i(b,{textAlign:"center",my:20,children:[e(p,{justify:"center",mb:4,children:e(v,{src:t||De})}),e(f,{color:s.secondaryTextColor,mb:6,children:o||"no Data yet..."}),n&&n()]}),V=({columns:t,data:o,onSort:n,loading:u=!1,caption:c,title:m,emptyRender:_})=>{const[l,E]=h.useState({direction:"",field:""});return i(J,{children:[m&&e(W,{size:"md",mt:6,children:m}),i(Oe,{position:"relative",children:[e(ae,{loading:u}),i(se,{variant:"unstyled",style:{borderCollapse:"collapse",borderSpacing:"0 10px"},className:"my-table",children:[e(Ne,{children:e(K,{pos:"relative",children:t.map(({key:x,sortable:g,width:A,thAlign:C,title:P,dataIndex:d,fixed:k})=>e(ne,{textAlign:C,color:l.field===d?s.primaryColor:s.infoTextColor,position:k?"sticky":"relative",zIndex:k?1:"inherit",bg:"white",right:0,fontSize:"md",fontWeight:"medium",cursor:g?"pointer":"default",w:A||`${100/t.length}%`,onClick:()=>{if(!g)return;const{direction:S,field:y}=l;if(y===d){let w="",F=y;S===""&&(w="ASC"),S==="ASC"&&(w="DESC"),S==="DESC"&&(w="",F=""),n&&n({...l,direction:w,field:F}),E(()=>({...l,direction:w,field:F}))}else n&&n({field:d,direction:"ASC"}),E({field:d,direction:"ASC"})},children:i(p,{justify:C==="center"?"center":C==="right"?"flex-end":"flex-start",children:[P,g&&l.field!==d&&e(v,{src:Ke}),l.field===d&&l.direction==="ASC"&&e(v,{src:He}),l.field===d&&l.direction==="DESC"&&e(v,{src:$e})]})},x))})}),e(je,{children:M(o)?e(K,{children:e(Be,{colSpan:t.length,children:_?_():e(U,{})})}):o.map((x,g)=>e(K,{bg:s.secondaryBgc,mb:4,pos:"relative",children:t.map(({dataIndex:A,render:C,key:P,width:d,align:k="left",fixed:S},y)=>e(ne,{fontSize:"md",bg:s.secondaryBgc,w:d,textAlign:k,position:S?"sticky":"relative",zIndex:S?1:"inherit",right:0,borderTopLeftRadius:g===0&&y===0?10:0,borderTopRightRadius:g===0&&y===(t==null?void 0:t.length)-1?10:0,borderBottomLeftRadius:y===0?10:0,borderBottomRightRadius:y===(t==null?void 0:t.length)-1?10:0,children:C?e(p,{justifyContent:k,children:C(x,x[A])}):x[A]},P))},JSON.stringify(x)))})]})]}),e(p,{justify:"center",my:8,children:!!c&&!u&&c()})]})},Je=({total:t,defaultCurrent:o=1,...n})=>e(be,{className:"ant-pagination",defaultCurrent:o,total:t,...n}),ae=({loading:t})=>t?e(p,{position:"absolute",left:0,right:0,top:0,bottom:0,bg:"rgba(0,0,0,.1)",borderRadius:4,justify:"center",zIndex:10,children:e(Ce,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:s.primaryColor,size:"xl",mt:20})}):null,Ue="/preview/assets/LEND-1c60a7b7.png",Ve=({data:{title:t="",description:o="",img:n="",keys:u=[]}})=>i(p,{justify:{sm:"center",md:"space-between"},alignItems:"center",wrap:"wrap",children:[i(b,{maxW:{md:"40%",xl:"50%",sm:"100%"},children:[typeof t=="string"?e(W,{fontSize:"6xl",children:t}):t,typeof o=="string"?e(f,{color:s.secondaryTextColor,mt:2,mb:10,fontSize:"xl",fontWeight:"medium",children:o}):o,e(Re,{spacing:10,children:u.map(({label:c,value:m})=>i(b,{children:[typeof m=="string"?e(W,{fontSize:"3xl",children:m}):m,typeof c=="string"?e(f,{color:s.infoTextColor,children:c}):c]},`${c}`))})]}),e(v,{src:n,w:{sm:"100%",md:"440px"}})]}),Ge=({tables:t})=>e(b,{children:t==null?void 0:t.map(o=>h.createElement(V,{...o,key:JSON.stringify(o)}))}),Xe=[{title:"Collection",dataIndex:"name",key:"name",align:"left",render:(t,o)=>i(p,{alignItems:"center",gap:2,children:[e(b,{w:10,h:10,bg:"pink",borderRadius:4}),e(f,{children:o})]})},{title:"Est. Floor*",dataIndex:"col2",key:"col2"},{title:"TVL (USD)",dataIndex:"col3",key:"col3",sortable:!0},{title:"Collateral Factor",dataIndex:"col4",key:"col4"},{title:"Interest",dataIndex:"col5",key:"Interest"},{title:"Trade",dataIndex:"id",key:"id",align:"right",thAlign:"right",fixed:"right",render:t=>e(p,{_hover:{bg:"white"},py:2,px:3,borderRadius:8,children:e(ie,{to:"/lend/pools/create",state:t,children:e(f,{children:"Supply"})})})}],D=[{title:"Asset",dataIndex:"col1",key:"col1",align:"left",render:(t,o)=>i(p,{alignItems:"center",gap:2,children:[e(b,{w:10,h:10,bg:"pink",borderRadius:4}),e(f,{children:o})]})},{title:"Lender",dataIndex:"col2",key:"col2"},{title:"Borrower",dataIndex:"col3",key:"col3"},{title:"Loan value",dataIndex:"col4",key:"col4"},{title:"Duration",dataIndex:"col5",key:"col5"},{title:"Interest",dataIndex:"col6",key:"col6"}],pt=()=>{var X,q;const{currentAccount:t}=h.useContext(xe),{isOpen:o,onOpen:n,onClose:u}=Se(),c=h.useCallback(r=>{if(!t){n();return}r&&r()},[t,n]),[m,_]=h.useState(!1),[l,E]=h.useState({list:[],meta:{current:1,total:0}}),{loading:x,run:g}=B(Ie,{onSuccess:r=>{var a,Y,Q,Z,ee;E({list:(a=r==null?void 0:r.data)==null?void 0:a.list,meta:{current:(Q=(Y=r==null?void 0:r.data)==null?void 0:Y.meta)==null?void 0:Q.pageNo,total:(ee=(Z=r==null?void 0:r.data)==null?void 0:Z.meta)==null?void 0:ee.totalRecord}})}}),[A,C]=h.useState(""),P=h.useMemo(()=>te(async a=>{a&&g()},1e3),[g]),[d,k]=h.useState({list:[]}),{loading:S,runAsync:y}=B(re,{onSuccess:r=>{var a;k({list:(a=r==null?void 0:r.data)==null?void 0:a.list})},ready:!!t}),[w,F]=h.useState(""),ce=h.useMemo(()=>te(async a=>{a&&y()},1e3),[y]),[de,he]=h.useState([]),{loading:pe}=B(re,{onSuccess:r=>{var a;he((a=r==null?void 0:r.data)==null?void 0:a.list)},ready:!!t}),[N,O]=h.useState(-1),{pathname:G}=ve(),I=ke(),[R,ue]=h.useState(0);h.useEffect(()=>{ue(()=>{switch(G){case"/lend/pools":return 0;case"/lend/my-pools":return c(),1;case"/lend/loans":return c(),2;default:return 0}})},[G,c]),h.useEffect(()=>{C(""),F("")},[]);const me=[{title:"Collection",dataIndex:"col1",key:"col1",align:"left",render:(r,a)=>i(p,{alignItems:"center",gap:2,children:[e(b,{w:10,h:10,bg:"pink",borderRadius:4}),e(f,{children:a})]})},{title:"Est. Floor*",dataIndex:"col2",key:"col2"},{title:"TVL (USD)",dataIndex:"col3",key:"col3",sortable:!0},{title:"Collateral Factor",dataIndex:"col4",key:"col4"},{title:"Tenor",dataIndex:"col5",key:"col5"},{title:"Interest",dataIndex:"col6",key:"col6"},{title:"Loans",dataIndex:"col7",key:"col7"},{title:"",dataIndex:"id",key:"id",align:"right",fixed:"right",thAlign:"right",render:(r,a)=>i(p,{alignItems:"center",gap:2,children:[e(f,{color:s.secondaryTextColor,onClick:()=>{I("/lend/loans"),O(a)},children:"Details"}),e(ie,{to:`/lend/pools/edit/${a}`,children:e(f,{color:s.primaryColor,py:3,px:4,borderRadius:8,bg:"white",children:"Manage"})})]})}];return i(J,{children:[e(b,{my:10,children:e(Ve,{data:{img:Ue,title:"Lend",description:"Provide funds to support NFT installment, obtain interest or collateral.",keys:[{label:"Collections",value:"51"},{label:"Historical Lent Out",value:i(p,{alignItems:"center",children:[e(v,{src:Le,height:8}),e(W,{fontSize:"3xl",children:"1,859.8"})]})},{label:"Total Value Locked",value:"$1.35M"}]}})}),i(Pe,{index:R,position:"relative",onChange:r=>{switch(r){case 0:I("/lend/pools");break;case 1:I("/lend/my-pools");break;case 2:I("/lend/loans");break}},children:[R!==2&&i(p,{position:"absolute",right:0,top:0,gap:4,children:[m||M(l==null?void 0:l.list)?e(oe,{value:R===0?A:w,onChange:r=>{R===0&&(C(r.target.value),P(r.target.value)),R===1&&(F(r.target.value),ce(r.target.value))}}):e(p,{h:"44px",w:"44px",borderRadius:44,justify:"center",alignItems:"center",cursor:"pointer",onClick:()=>_(!0),_hover:{bg:s.secondaryBgc},children:e(v,{src:Te})}),!M(l==null?void 0:l.list)&&e(j,{variant:"secondary",minW:"200px",onClick:()=>c(()=>I("/lend/pools/create")),children:"+ Creative new pool"})]}),i(We,{_active:{color:s.primaryColor,fontWeight:"bold"},children:[e($,{pt:4,px:2,pb:5,_selected:{color:s.primaryColor,borderBottomWidth:2,borderColor:s.primaryColor},fontWeight:"bold",children:"Active Collections"}),i($,{pt:4,px:2,pb:5,_selected:{color:s.primaryColor,borderBottomWidth:2,borderColor:s.primaryColor},fontWeight:"bold",children:["My PoolsÂ ",e(Ee,{bg:s.primaryColor,color:"white",borderRadius:15,fontSize:"xs",h:5,children:(X=d==null?void 0:d.list)==null?void 0:X.length})]}),e($,{pt:4,px:2,pb:5,_selected:{color:s.primaryColor,borderBottomWidth:2,borderColor:s.primaryColor},fontWeight:"bold",children:"Open Loans"})]}),i(ze,{children:[e(H,{p:0,children:e(V,{loading:x,columns:Xe,data:(l==null?void 0:l.list)||[],caption:()=>{var r;return M(l==null?void 0:l.list)?e(J,{}):e(Je,{total:(r=l==null?void 0:l.meta)==null?void 0:r.total,current:l.meta.current,onChange:a=>{console.log("aaaaaaaaaaaa"),console.log("ð ~ file: Lend.tsx:557 ~ Lend ~ page",a),g()}})},onSort:r=>{console.log(r),g()},emptyRender:()=>e(U,{action:()=>e(j,{variant:"secondary",minW:"200px",onClick:()=>c(()=>I("/lend/pools/create")),children:"+ Creative new pool"})})})}),e(H,{p:0,children:e(V,{loading:S,columns:me,data:(d==null?void 0:d.list)||[],onSort:r=>{console.log(r,R),y()},emptyRender:()=>e(U,{action:()=>e(j,{variant:"secondary",minW:"200px",onClick:()=>c(()=>I("/lend/pools/create")),children:"+ Creative new pool"})})})}),e(H,{p:0,children:i(p,{justify:"space-between",mt:4,children:[i(b,{border:`1px solid ${s.borderColor}`,borderRadius:12,p:6,w:{lg:"25%",md:"30%"},children:[e(W,{size:"md",mb:4,children:"Collections"}),e(oe,{placeholder:"Collections..."}),i(_e,{spacing:4,mt:4,position:"relative",children:[e(ae,{loading:pe}),i(p,{justify:"space-between",py:3,px:4,alignItems:"center",borderRadius:8,border:`1px solid ${s.borderColor}`,cursor:"pointer",onClick:()=>O(-1),bg:N===-1?s.secondaryColor:"white",children:[e(f,{fontSize:"sm",fontWeight:"700",children:"All my Collections"}),N===-1?e(v,{src:Ae}):e(f,{fontSize:"sm",children:(q=d.list)==null?void 0:q.length})]}),de.map(r=>e(Fe,{data:{...r},onClick:()=>O(r.id),isActive:N===r.id},JSON.stringify(r)))]})]}),e(b,{w:{lg:"72%",md:"65%"},children:e(Ge,{tables:[{title:"Current Loans as Lender",columns:D,data:[]},{title:"Previous Loans as Lender(Paid off)",columns:D,data:[]},{title:"Previous Loans as Lender(Overdue)",columns:D,data:[]}]})})]})})]})]}),e(we,{visible:o,handleClose:u})]})};export{pt as default};
